class UppyController < Shrine::Uppy::S3Multipart::Controller
  skip_after_action :verify_authorized, only: %i[upload]
  skip_after_action :verify_policy_scoped

  def upload
    super
  end

  private

  def set_rack_response((status, headers, body))
    self.status = status
    self.headers.merge!(headers)
    self.response_body = body
  end
end
